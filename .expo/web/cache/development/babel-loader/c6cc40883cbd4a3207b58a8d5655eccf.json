{
  "ast": null,
  "code": "import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport htmlparser from 'htmlparser2-without-node-native';\nimport entities from 'entities';\nimport AutoSizedImage from \"./AutoSizedImage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createElement as _createElement } from \"react\";\nvar defaultOpts = {\n  lineBreak: '\\n',\n  paragraphBreak: '\\n\\n',\n  bullet: \"\\u2022 \",\n  TextComponent: Text,\n  textComponentProps: null,\n  NodeComponent: Text,\n  nodeComponentProps: null\n};\n\nvar Img = function Img(props) {\n  var width = parseInt(props.attribs['width'], 10) || parseInt(props.attribs['data-width'], 10) || 0;\n  var height = parseInt(props.attribs['height'], 10) || parseInt(props.attribs['data-height'], 10) || 0;\n  var imgStyle = {\n    width: width,\n    height: height\n  };\n  var source = {\n    uri: props.attribs.src,\n    width: width,\n    height: height\n  };\n  return _jsx(AutoSizedImage, {\n    source: source,\n    style: imgStyle\n  });\n};\n\nexport default function htmlToElement(rawHtml) {\n  var customOpts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var done = arguments.length > 2 ? arguments[2] : undefined;\n\n  var opts = _objectSpread(_objectSpread({}, defaultOpts), customOpts);\n\n  function inheritedStyle(parent) {\n    if (!parent) return null;\n    var style = StyleSheet.flatten(opts.styles[parent.name]) || {};\n    var parentStyle = inheritedStyle(parent.parent) || {};\n    return _objectSpread(_objectSpread({}, parentStyle), style);\n  }\n\n  function domToElement(dom, parent) {\n    if (!dom) return null;\n    var renderNode = opts.customRenderer;\n    var orderedListCounter = 1;\n    return dom.map(function (node, index, list) {\n      if (renderNode) {\n        var rendered = renderNode(node, index, list, parent, domToElement);\n        if (rendered || rendered === null) return rendered;\n      }\n\n      var TextComponent = opts.TextComponent;\n\n      if (node.type === 'text') {\n        var defaultStyle = opts.textComponentProps ? opts.textComponentProps.style : null;\n        var customStyle = inheritedStyle(parent);\n        return _createElement(TextComponent, _objectSpread(_objectSpread({}, opts.textComponentProps), {}, {\n          key: index,\n          style: [defaultStyle, customStyle]\n        }), entities.decodeHTML(node.data));\n      }\n\n      if (node.type === 'tag') {\n        if (node.name === 'img') {\n          return _jsx(Img, {\n            attribs: node.attribs\n          }, index);\n        }\n\n        var linkPressHandler = null;\n        var linkLongPressHandler = null;\n\n        if (node.name === 'a' && node.attribs && node.attribs.href) {\n          linkPressHandler = function linkPressHandler() {\n            return opts.linkHandler(entities.decodeHTML(node.attribs.href));\n          };\n\n          if (opts.linkLongPressHandler) {\n            linkLongPressHandler = function linkLongPressHandler() {\n              return opts.linkLongPressHandler(entities.decodeHTML(node.attribs.href));\n            };\n          }\n        }\n\n        var linebreakBefore = null;\n        var linebreakAfter = null;\n\n        if (opts.addLineBreaks) {\n          switch (node.name) {\n            case 'pre':\n              linebreakBefore = opts.lineBreak;\n              break;\n\n            case 'p':\n              if (index < list.length - 1) {\n                linebreakAfter = opts.paragraphBreak;\n              }\n\n              break;\n\n            case 'br':\n            case 'h1':\n            case 'h2':\n            case 'h3':\n            case 'h4':\n            case 'h5':\n              linebreakAfter = opts.lineBreak;\n              break;\n          }\n        }\n\n        var listItemPrefix = null;\n\n        if (node.name === 'li') {\n          var _defaultStyle = opts.textComponentProps ? opts.textComponentProps.style : null;\n\n          var _customStyle = inheritedStyle(parent);\n\n          if (!parent) {\n            listItemPrefix = null;\n          } else if (parent.name === 'ol') {\n            listItemPrefix = _jsx(TextComponent, {\n              style: [_defaultStyle, _customStyle],\n              children: orderedListCounter++ + \". \"\n            });\n          } else if (parent.name === 'ul') {\n            listItemPrefix = _jsx(TextComponent, {\n              style: [_defaultStyle, _customStyle],\n              children: opts.bullet\n            });\n          }\n\n          if (opts.addLineBreaks && index < list.length - 1) {\n            linebreakAfter = opts.lineBreak;\n          }\n        }\n\n        var NodeComponent = opts.NodeComponent,\n            styles = opts.styles;\n        return _createElement(NodeComponent, _objectSpread(_objectSpread({}, opts.nodeComponentProps), {}, {\n          key: index,\n          onPress: linkPressHandler,\n          style: !node.parent ? styles[node.name] : null,\n          onLongPress: linkLongPressHandler\n        }), linebreakBefore, listItemPrefix, domToElement(node.children, node), linebreakAfter);\n      }\n    });\n  }\n\n  var handler = new htmlparser.DomHandler(function (err, dom) {\n    if (err) done(err);\n    done(null, domToElement(dom));\n  });\n  var parser = new htmlparser.Parser(handler);\n  parser.write(rawHtml);\n  parser.done();\n}",
  "map": {
    "version": 3,
    "sources": [
      "/Users/numa.maurin/Documents/TeadsSDK-ReactNative/node_modules/react-native-htmlview/htmlToElement.js"
    ],
    "names": [
      "React",
      "htmlparser",
      "entities",
      "AutoSizedImage",
      "defaultOpts",
      "lineBreak",
      "paragraphBreak",
      "bullet",
      "TextComponent",
      "Text",
      "textComponentProps",
      "NodeComponent",
      "nodeComponentProps",
      "Img",
      "props",
      "width",
      "parseInt",
      "attribs",
      "height",
      "imgStyle",
      "source",
      "uri",
      "src",
      "htmlToElement",
      "rawHtml",
      "customOpts",
      "done",
      "opts",
      "inheritedStyle",
      "parent",
      "style",
      "StyleSheet",
      "flatten",
      "styles",
      "name",
      "parentStyle",
      "domToElement",
      "dom",
      "renderNode",
      "customRenderer",
      "orderedListCounter",
      "map",
      "node",
      "index",
      "list",
      "rendered",
      "type",
      "defaultStyle",
      "customStyle",
      "decodeHTML",
      "data",
      "linkPressHandler",
      "linkLongPressHandler",
      "href",
      "linkHandler",
      "linebreakBefore",
      "linebreakAfter",
      "addLineBreaks",
      "length",
      "listItemPrefix",
      "children",
      "handler",
      "DomHandler",
      "err",
      "parser",
      "Parser",
      "write"
    ],
    "mappings": "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",
    "sourcesContent": [
      "import React from 'react';\nimport {StyleSheet, Text} from 'react-native';\nimport htmlparser from 'htmlparser2-without-node-native';\nimport entities from 'entities';\n\nimport AutoSizedImage from './AutoSizedImage';\n\nconst defaultOpts = {\n  lineBreak: '\\n',\n  paragraphBreak: '\\n\\n',\n  bullet: '\\u2022 ',\n  TextComponent: Text,\n  textComponentProps: null,\n  NodeComponent: Text,\n  nodeComponentProps: null,\n};\n\nconst Img = props => {\n  const width =\n    parseInt(props.attribs['width'], 10) || parseInt(props.attribs['data-width'], 10) || 0;\n  const height =\n    parseInt(props.attribs['height'], 10) ||\n    parseInt(props.attribs['data-height'], 10) ||\n    0;\n\n  const imgStyle = {\n    width,\n    height,\n  };\n\n  const source = {\n    uri: props.attribs.src,\n    width,\n    height,\n  };\n  return <AutoSizedImage source={source} style={imgStyle} />;\n};\n\nexport default function htmlToElement(rawHtml, customOpts = {}, done) {\n  const opts = {\n    ...defaultOpts,\n    ...customOpts,\n  };\n\n  function inheritedStyle(parent) {\n    if (!parent) return null;\n    const style = StyleSheet.flatten(opts.styles[parent.name]) || {};\n    const parentStyle = inheritedStyle(parent.parent) || {};\n    return {...parentStyle, ...style};\n  }\n\n  function domToElement(dom, parent) {\n    if (!dom) return null;\n\n    const renderNode = opts.customRenderer;\n    let orderedListCounter = 1;\n\n    return dom.map((node, index, list) => {\n      if (renderNode) {\n        const rendered = renderNode(\n          node,\n          index,\n          list,\n          parent,\n          domToElement\n        );\n        if (rendered || rendered === null) return rendered;\n      }\n\n      const {TextComponent} = opts;\n\n      if (node.type === 'text') {\n        const defaultStyle = opts.textComponentProps ? opts.textComponentProps.style : null;\n        const customStyle = inheritedStyle(parent);\n\n        return (\n          <TextComponent\n            {...opts.textComponentProps}\n            key={index}\n            style={[defaultStyle, customStyle]}\n          >\n            {entities.decodeHTML(node.data)}\n          </TextComponent>\n        );\n      }\n\n      if (node.type === 'tag') {\n        if (node.name === 'img') {\n          return <Img key={index} attribs={node.attribs} />;\n        }\n\n        let linkPressHandler = null;\n        let linkLongPressHandler = null;\n        if (node.name === 'a' && node.attribs && node.attribs.href) {\n          linkPressHandler = () =>\n            opts.linkHandler(entities.decodeHTML(node.attribs.href));\n          if (opts.linkLongPressHandler) {\n            linkLongPressHandler = () =>\n              opts.linkLongPressHandler(entities.decodeHTML(node.attribs.href));\n          }\n        }\n\n        let linebreakBefore = null;\n        let linebreakAfter = null;\n        if (opts.addLineBreaks) {\n          switch (node.name) {\n          case 'pre':\n            linebreakBefore = opts.lineBreak;\n            break;\n          case 'p':\n            if (index < list.length - 1) {\n              linebreakAfter = opts.paragraphBreak;\n            }\n            break;\n          case 'br':\n          case 'h1':\n          case 'h2':\n          case 'h3':\n          case 'h4':\n          case 'h5':\n            linebreakAfter = opts.lineBreak;\n            break;\n          }\n        }\n\n        let listItemPrefix = null;\n        if (node.name === 'li') {\n          const defaultStyle = opts.textComponentProps ? opts.textComponentProps.style : null;\n          const customStyle = inheritedStyle(parent);\n\n          if(!parent){\n            listItemPrefix = null;\n          } else if (parent.name === 'ol') {\n            listItemPrefix = (<TextComponent style={[defaultStyle, customStyle]}>\n              {`${orderedListCounter++}. `}\n            </TextComponent>);\n          } else if (parent.name === 'ul') {\n            listItemPrefix = (<TextComponent style={[defaultStyle, customStyle]}>\n              {opts.bullet}\n            </TextComponent>);\n          }\n          if (opts.addLineBreaks && index < list.length - 1) {\n            linebreakAfter = opts.lineBreak;\n          }\n        }\n\n        const {NodeComponent, styles} = opts;\n\n        return (\n          <NodeComponent\n            {...opts.nodeComponentProps}\n            key={index}\n            onPress={linkPressHandler}\n            style={!node.parent ? styles[node.name] : null}\n            onLongPress={linkLongPressHandler}\n          >\n            {linebreakBefore}\n            {listItemPrefix}\n            {domToElement(node.children, node)}\n            {linebreakAfter}\n          </NodeComponent>\n        );\n      }\n    });\n  }\n\n  const handler = new htmlparser.DomHandler(function(err, dom) {\n    if (err) done(err);\n    done(null, domToElement(dom));\n  });\n  const parser = new htmlparser.Parser(handler);\n  parser.write(rawHtml);\n  parser.done();\n}\n"
    ]
  },
  "metadata": {},
  "sourceType": "module"
}
